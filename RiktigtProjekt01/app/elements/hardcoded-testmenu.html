<dom-module name="hardcoded-testmenu">
  <style is="custom-style">

    .menu-container, .menu-header-container { position: relative; }
    .menu-container > div:last-of-type { margin-bottom: 0; }
    .menu-row { margin: 8px 8px 0 8px; }
    .menu-row .inner { 
      padding: 8px;
      position: relative;
      background: #fff;
      border-radius: 0 0 3px 3px;
    }
    .menu-element {
      position: relative;
      width: 100%;
      overflow: auto;
      padding: 12px 8px;
      border:solid;
      border-width: 1px;
      border-color:lightgray;
      box-sizing: border-box;
      background: #fff;
    }
    .menu-element iron-icon { color: #227E94; }
    .menu-row.selected .menu-element, .menu-row.selected .menu-element iron-icon {  
      background: #227E94;
      color: #fff !important;
    }
    .menu-comment { overflow: auto;  padding-top: 5px;}
    .radio-button-style{
      display:block;
      font-size:12px;
      padding: 5px;
      margin:0px;
    }
    .mini-header{
      font-family:  "Times New Roman", Times, serif;
      font-size: 24px;
      font-style: bold;
    }
    .menu-button{
      color:black;
      padding:0px;
      margin:0px;
      width:24px;
      height:24px;
    }
    .float-right-div{
      float:right;
    }
    iron-collapse{
      border:lightgray;
      border:solid;
      border-width: 1px;
    }
    .paper-collapse{
      margin:0px;
      padding:0px;
    }
    .main-menu{
      text-align: center;
      font-family: Arial, Helvetica, sans-serif;
    }
    .button-group{
      
      margin:10px;
    }
    .bottom-button{
      background-color: rgb(220,220,220);
      padding:5px 20px;
    }
  </style>

  <template>
  <img src="../images/house.png" width="350px" height="200px" />
    <h1 class= "main-menu">Vid ankomst</h1>
    <div class="menu-container">
      <paper-material class="paper-collapse" elevation="3">
        <div class="menu-row" data-idx="1">
          <div class="menu-element" on-click="_toggleMilestone">
            <iron-icon icon="content-paste"></iron-icon>&nbsp;<span>Brandstadie</span><div class="float-right-div"><paper-icon-button class="menu-button" icon="star"></paper-icon-button> <span>1</span></div>
          </div>
          <iron-collapse id="ic" duration="0.2" role="group">
            <div class="inner">
              <p class="mini-header">Brand vid ankomst</p>
              <paper-radio-group id="rgfire" selected="0">
                <paper-radio-button noink class="radio-button-style" name="0">Ingen</paper-radio-button>
                <paper-radio-button noink class="radio-button-style" name="1">Mild</paper-radio-button>
                <paper-radio-button noink class="radio-button-style" name="2">Mellan</paper-radio-button>
                <paper-radio-button noink class="radio-button-style" name="3">Kraftig</paper-radio-button>
                <paper-radio-button noink class="radio-button-style" name="4">Mycket kraftig</paper-radio-button>
              </paper-radio-group>
              <p class="mini-header">Brandutveckling</p>
              <paper-radio-group id="rgfirestate" allowEmptySelection>
                <paper-radio-button toggles noink class="radio-button-style" name="0">Statisk</paper-radio-button>
                <paper-radio-button noink class="radio-button-style" name="1">Avtagande</paper-radio-button>
                <paper-radio-button noink class="radio-button-style" name="2">Kontrollerat ökande</paper-radio-button>
                <paper-radio-button noink class="radio-button-style" name="3">Okontrollerat ökande</paper-radio-button>
                <paper-radio-button noink class="radio-button-style" name="4">Risk för kommande spridning</paper-radio-button>
              </paper-radio-group>
              <p class="mini-header">Anteckning</p>
              <paper-textarea label="Kommentar i fritext" maxlength="800" char-counter ></paper-textarea>
            </div>
          </iron-collapse>
        </div>
      </paper-material>
        

      <paper-material class="paper-collapse" elevation="3">
        <div class="menu-row" data-idx="2">
          <div class="menu-element" >
            <iron-icon icon="content-paste"></iron-icon>&nbsp;<span>Rökbildning</span><div class="float-right-div"><paper-icon-button class="menu-button" icon="more-vert" on-click="_toggleMilestone"></div></paper-icon-button>
          </div>
          <iron-collapse id="ic2" role="group">
          
            <div class="collapse-content">
            
              <p class="mini-header">Rök vid ankomst</p>
              <paper-radio-group id="rgsmoke" selected="0">
                <paper-radio-button noink class="radio-button-style" name="0">Ingen</paper-radio-button>
                <paper-radio-button noink class="radio-button-style" name="1">avtagande mängd rök</paper-radio-button>
                <paper-radio-button noink class="radio-button-style" name="2">Lindrig rökbildning</paper-radio-button>
                <paper-radio-button noink class="radio-button-style" name="3">Alvarlig rökbildning</paper-radio-button>
                <paper-radio-button noink class="radio-button-style" name="4">Mormors bil med stängda fönster</paper-radio-button>
              </paper-radio-group>
              <hr>
                <p class="mini-header">Anteckning</p>

                <paper-textarea label="Kommentar i fritext" maxlength="800" rows="1" width="300px" value="{{smokeAtArrivalNote}}" char-counter></paper-textarea>
                <div class="button-group">
                  <paper-button class="bottom-button" on-click="_closeOpenMilestone">Ok</paper-button>  
                  <paper-button class="bottom-button" on-click="_closeOpenMilestone">Avbryt</paper-button>              
                </div>
              </div>
            </iron-collapse> 
          </div>         
        </paper-material>
        &nbsp;
        &nbsp;
        &nbsp;

        <h1 class= "main-menu">Under insatsen</h1>

        <paper-material class="paper-collapse" elevation="3">
        <div class="menu-row" data-idx="1">
          <div class="menu-element" on-click="_toggleMilestone">
            <iron-icon icon="content-paste"></iron-icon>&nbsp;<span>Utrustning använd</span><div class="float-right-div"><paper-icon-button class="menu-button" icon="create"></paper-icon-button> <span>{{numberOfEdits}}</span></div>
          </div>
          <iron-collapse id="ic" duration="0.2" role="group">
            <div class="inner">
              <p class="mini-header">Personal utrustning</p>
              <paper-radio-group id="rgfire" selected="0">
                <paper-radio-button noink class="radio-button-style" name="0">Ingen</paper-radio-button>
                <paper-radio-button noink class="radio-button-style" name="1">Byxor</paper-radio-button>
                <paper-radio-button noink class="radio-button-style" name="2">Rökdykarmask</paper-radio-button>
                <paper-radio-button noink class="radio-button-style" name="3">Brandsläckare</paper-radio-button>
                <paper-radio-button noink class="radio-button-style" name="4">Chickennuggets</paper-radio-button>
              </paper-radio-group>
              <p class="mini-header">Fordon</p>
              <paper-radio-group id="rgfirestate" allowEmptySelection>
                <paper-radio-button toggles noink class="radio-button-style" name="0">Brandbil</paper-radio-button>
                <paper-radio-button noink class="radio-button-style" name="1">Offensiv enhet</paper-radio-button>
                <paper-radio-button noink class="radio-button-style" name="2">Harley Davidson</paper-radio-button>
                <paper-radio-button noink class="radio-button-style" name="3">Jetski</paper-radio-button>
              </paper-radio-group>
              <p class="mini-header">Anteckning</p>
              <paper-textarea label="Kommentar i fritext" maxlength="800" char-counter ></paper-textarea>
            </div>
          </iron-collapse>
        </div>
      </paper-material>

        

      <paper-material class="paper-collapse" elevation="3">
        <div class="menu-row" data-idx="2">
          <div class="menu-element" >
            <iron-icon icon="content-paste"></iron-icon>&nbsp;<span>Skador</span><div class="float-right-div"><paper-icon-button class="menu-button" icon="more-vert" on-click="_toggleMilestone"></div></paper-icon-button>
          </div>
          <iron-collapse id="ic2" role="group">
          
            <div class="collapse-content">
            
              <p class="mini-header">Personskador</p>
              <paper-radio-group id="rgsmoke" selected="0">
                <paper-radio-button noink class="radio-button-style" name="0">Inga</paper-radio-button>
                <paper-radio-button noink class="radio-button-style" name="1">Brännskador</paper-radio-button>
                <paper-radio-button noink class="radio-button-style" name="2">Rökskador</paper-radio-button>
                <paper-radio-button noink class="radio-button-style" name="3">Impaktskador</paper-radio-button>
                <paper-radio-button noink class="radio-button-style" name="4">Alvarliga frakturer</paper-radio-button>
              </paper-radio-group>
              <hr>
                <p class="mini-header">Anteckning</p>

                <paper-textarea label="Kommentar i fritext" maxlength="800" rows="1" width="300px" value="{{smokeAtArrivalNote}}" char-counter></paper-textarea>
                <div class="button-group">
                  <paper-button class="bottom-button" on-click="_closeOpenMilestone">Ok</paper-button>  
                  <paper-button class="bottom-button" on-click="_closeOpenMilestone">Avbryt</paper-button>              
                </div>
              </div>
            </iron-collapse> 
          </div>         
        </paper-material>
        &nbsp;
        &nbsp;
        &nbsp;


        <h1 class= "main-menu">Efter insatsen</h1>

        <paper-material class="paper-collapse" elevation="3">
        <div class="menu-row" data-idx="1">
          <div class="menu-element" on-click="_toggleMilestone">
            <iron-icon icon="content-paste"></iron-icon>&nbsp;<span>Brandstadie</span><div class="float-right-div"><paper-icon-button class="menu-button" icon="star"></paper-icon-button> <span>2</span></div>
          </div>
          <iron-collapse id="ic" duration="0.2" role="group">
            <div class="inner">
              <p class="mini-header">Brand vid ankomst</p>
              <paper-radio-group id="rgfire" selected="0">
                <paper-radio-button noink class="radio-button-style" name="0">Ingen</paper-radio-button>
                <paper-radio-button noink class="radio-button-style" name="1">Mild</paper-radio-button>
                <paper-radio-button noink class="radio-button-style" name="2">Mellan</paper-radio-button>
                <paper-radio-button noink class="radio-button-style" name="3">Kraftig</paper-radio-button>
                <paper-radio-button noink class="radio-button-style" name="4">Mycket kraftig</paper-radio-button>
              </paper-radio-group>
              <p class="mini-header">Brandutveckling</p>
              <paper-radio-group id="rgfirestate" allowEmptySelection>
                <paper-radio-button toggles noink class="radio-button-style" name="0">Statisk</paper-radio-button>
                <paper-radio-button noink class="radio-button-style" name="1">Avtagande</paper-radio-button>
                <paper-radio-button noink class="radio-button-style" name="2">Kontrollerat ökande</paper-radio-button>
                <paper-radio-button noink class="radio-button-style" name="3">Okontrollerat ökande</paper-radio-button>
                <paper-radio-button noink class="radio-button-style" name="4">Risk för kommande spridning</paper-radio-button>
              </paper-radio-group>
              <p class="mini-header">Anteckning</p>
              <paper-textarea label="Kommentar i fritext" maxlength="800" char-counter ></paper-textarea>
            </div>
          </iron-collapse>
        </div>
      </paper-material>
        

      <paper-material class="paper-collapse" elevation="3">
        <div class="menu-row" data-idx="2">
          <div class="menu-element" >
            <iron-icon icon="content-paste"></iron-icon>&nbsp;<span>Rökbildning</span><div class="float-right-div"><paper-icon-button class="menu-button" icon="more-vert" on-click="_toggleMilestone"></div></paper-icon-button>
          </div>
          <iron-collapse id="ic2" role="group">
          
            <div class="collapse-content">
            
              <p class="mini-header">Rök vid ankomst</p>
              <paper-radio-group id="rgsmoke" selected="0">
                <paper-radio-button noink class="radio-button-style" name="0">Ingen</paper-radio-button>
                <paper-radio-button noink class="radio-button-style" name="1">avtagande mängd rök</paper-radio-button>
                <paper-radio-button noink class="radio-button-style" name="2">Lindrig rökbildning</paper-radio-button>
                <paper-radio-button noink class="radio-button-style" name="3">Alvarlig rökbildning</paper-radio-button>
                <paper-radio-button noink class="radio-button-style" name="4">Mormors bil med stängda fönster</paper-radio-button>
              </paper-radio-group>
              
                <p class="mini-header">Anteckning</p>

                <paper-textarea label="Kommentar i fritext" maxlength="800" rows="1" width="300px" value="{{smokeAtArrivalNote}}" char-counter></paper-textarea>
                <div class="button-group">
                  <paper-button class="bottom-button" on-click="_closeOpenMilestone">Ok</paper-button>  
                  <paper-button class="bottom-button" on-click="_closeOpenMilestone">Avbryt</paper-button>              
                </div>
              </div>
            </iron-collapse> 
          </div>         
        </paper-material>

    </div>
  </template>

  <script>
    Polymer({
      is: 'hardcoded-testmenu',

      behaviors: [],

      properties: {
        currentErrand: {
          type: Object,
          notify: true
        },
        smokeAtArrivalNote:{
          type: String,
          notify:true
        },
        numberOfEdits:{
          type: Number,
          notify: true,
          value: 4
        }
      },

      listeners: {
        'close-milestones': '_closeOpenMilestone',
        'return-from-tillsyn': '_returnTillsyn'
      },
      /*


      // ##############################################################################
      // ########################## CHECK PRIVILEGES ##################################
      // ##############################################################################
      _canModifyMilestoneStatus: function(errandStatus, mode, unused) {
        if (this._checkErrandStatus(errandStatus)) return true; // disable if avslutat

        var requiredPrivs = [79, 11];
        if (mode === 'close') requiredPrivs.push(281);
        if (this._checkPrivs(this.privs, requiredPrivs)) return false;
        return true;
      },

      _canEditMilestone: function(errandStatus, milestoneStatus, searchMode) {
        if (this._checkErrandStatus(errandStatus)) return true; // disable if avslutat
        if (this._isTruthy(milestoneStatus)) return true; // true= disable element
        if (searchMode) return true; // true = disable

        var requiredPrivs = [79, 11];
        if (this._checkPrivs(this.privs, requiredPrivs)) return false;
        return true;
      },

      _canCreateMilestone: function(errandStatus, unused) {
        if (this._checkErrandStatus(errandStatus)) return true; // disable if avslutat

        var requiredPrivs = [79, 11, 179];

        if (this._checkPrivs(this.privs, requiredPrivs)) return false;
        return true;
      },

      _canDeleteMilestone: function(errandStatus, status, unused) {
        if (this._checkErrandStatus(errandStatus)) return true; // disable if avslutat

        var requiredPrivs = [79, 11, 12];
        if (status == 0) requiredPrivs.push(282);

        if (this._checkPrivs(this.privs, requiredPrivs)) return false;
        return true;
      },
      */


      // ##############################################################################
      // ########################## EVENT HANDLERS ####################################
      // ##############################################################################
     
      _toggleMilestone: function(e) {
        var clickedParent = LPA.closestAncestor(e.target, ".menu-row") || e.target;
        var milestoneDetails = clickedParent.querySelector("iron-collapse");

        // Get all rows with iron-collapse in them
        var allMilestoneElems = document.querySelectorAll("div.menu-row iron-collapse");
        for (var i = 0, len = allMilestoneElems.length; i < len; i++) {
          var elem = allMilestoneElems[i];
          if (elem.opened && elem !== milestoneDetails) {
            // If any other element is opened, close it.
            elem.opened=!elem.opened;
            // Deselect the parent element
            elem.parentElement.classList.remove('selected');
          }
        }

        // Toggle this element
        milestoneDetails.opened=!milestoneDetails.opened;

        if (milestoneDetails.opened) {
          clickedParent.classList.add('selected');
        } else {
          clickedParent.classList.remove('selected');
        }
      },

      _finishMilestone: function(evt) {
        evt.stopPropagation();
        
        var btn = LPA.closestAncestor(evt.target, 'paper-fab') || evt.target;
        if (btn.getAttribute('confirm-click')) {
          btn.removeAttribute('confirm-click');
          this.fire('hide-toast');
          this._modifyMilestoneStatus(btn, 1);
          this._setMilestoneDateToNow(evt);

        } else {
          btn.setAttribute('confirm-click', true);
          this.fire('show-toast', 'Tryck igen för att klarmarkera åtgärd');
        }
        this.fire('extend-timeout');
      },

      _openMilestone: function(evt) {
        evt.stopPropagation();

        var btn = LPA.closestAncestor(evt.target, 'paper-fab') || evt.target;
        if (btn.getAttribute('confirm-click')) {
          btn.removeAttribute('confirm-click');
          this.fire('hide-toast');
          this._modifyMilestoneStatus(btn, 0);
        } else {
          btn.setAttribute('confirm-click', true);
          this.fire('show-toast', 'Tryck igen för att öppna åtgärd');
        }
        this.fire('extend-timeout');
      },
      _closeOpenMilestone: function() {
        var selectedMilestone = this.querySelector('.menu-row.selected');
        if (selectedMilestone && selectedMilestone.classList.contains('selected')) {
          selectedMilestone.classList.remove('selected');
          selectedMilestone.querySelector('iron-collapse').toggle();
        }
      }

    });
  </script>
</dom-module>